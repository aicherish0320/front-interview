# 前端常用的设计模式有哪些？并说明使用场景

- 工厂模式
  - 用一个工厂函数，用来创建实例，隐藏 new
  - 如 jQuery $ 函数
  - 如 React createElement 函数
- 单例模式
  - 全局唯一的实例（无法生存第二个）
  - 如 Vuex Redux 的 store
  - 如全局唯一的 dialog modal
  - JS 是单线程的，创建单例很简单
  - Java 是支持多线程的，创建单例要考虑锁死线程
  - 否则多个线程同时创建，单例就重复了（多线程共享进程内存）
- 代理模式
  - 使用者不能直接访问对象，而是访问一个代理层
  - 在代理层可以监听 get set 做很多事情
  - 如 ES6 Proxy 实现 Vue3 响应式
- 观察者模式
  ```js
  btn.addEventListener('click', () => {})
  ```
- 发布订阅模式
  ```js
  // 绑定
  event.on('eventName', () => {})
  event.on('eventName', () => {})
  // 触发执行
  event.emit('eventName')
  // 绑定的事件要记得解除，防止内存泄漏
  ```
- 装饰器模式
  - 原功能不变，增加一些新功能 （AOP 面向切片功能）
  - ES6 Decorator
  - 类装饰器、方法装饰器

## 设计原则

- 最重要的思想：开放封闭原则
- 对扩展开放
- 对修改封闭

## 观察者模式 和 发布订阅者模式的区别

- Subject 和 Observer 直接绑定，没有中间媒介
- 如 addEventListener 绑定事件

- Publisher 和 Observer 互不相识，需要中间媒介 Event Channel
- 如 EventBus

### 理解【观察者模式】和【发布订阅】的区别

#### 一、定性区别

首先，观察者是经典软件**设计模式**中的一种，但发布订阅只是软件架构中的一种**消息范式**。

#### 二、组成区别

其次，就是实现二者所需的角色数量有着明显的区别。观察者模式本身只需要 2 两个角色便可成型，即观察者和发布者，其实被观察者是重点。而发布订阅需要至少 3 个角色来组成，包括发布者、订阅者和发布订阅中心，其中发布订阅中心是重点。

#### 三、各自实现

1、观察者模式实现
观察者模式一般至少有一个可被观察的对象 Subject，可以有多个观察者去观察这个对象。二者的关系是通过被观察者主动建立的，被观察者至少有三个方法-添加观察者、移除观察者、通知观察者

当被观察者将某个观察者添加到自己的观察者列表后，观察者与被观察者的关联就建立起来了。此后只要被观察者在某种时机触发通知观察者方法时，观察者即可接收来自被观察者的消息。

2、发布订阅
与观察者模式相比，发布订阅核心基于一个中心来建立整个体系。其中 发布者 和 订阅者 不直接进行通信，而是发布者将要发布的消息交由中心管理，订阅者也是根据自己的情况，按需订阅中心中的消息。
