<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeakMap</title>
  </head>
  <body></body>
  <script>
    const wMap = new WeakMap()
    const keyObj = { foo: 'foo' }

    function fn() {
      const obj = { x: 100 }
      wMap.set(keyObj, obj)
    }
    fn()

    // console.log(wMap.get(keyObj))
  </script>
  <script>
    // const wm1 = new WeakMap(),
    //   wm2 = new WeakMap(),
    //   wm3 = new WeakMap()
    // const o1 = {},
    //   o2 = function () {},
    //   o3 = window
    // wm1.set(o1, 37)
    // wm1.set(o2, 'aicherish')
    // wm2.set(o1, o2)
    // wm2.set(o3, undefined)
    // wm2.set(wm1, wm2)

    // console.log(wm1.get(o2)) // aicherish
    // console.log(wm2.get(o2)) // undefined
    // console.log(wm2.get(o3)) // undefined
    // console.log(wm1.has(o2)) // true

    // console.log(wm2.has(o2)) // false
    // console.log(wm2.has(o3)) // true (即使值是undefined)
    // console.log(wm3.set(o1, 37))
    // console.log(wm3.get(o1)) // 37

    // console.log(wm1.has(o1)) // true
    // console.log(wm1.delete(o1))
    // console.log(wm1.has(o1)) // false
  </script>
  <script>
    const map = new Map([
      ['a', 1],
      ['b', 2]
    ])
    for (const [key, value] of map) {
      console.log(key, value)
    }
    const obj = {
      a: 1,
      b: 2
    }
    for (const key in obj) {
      console.log(key)
    }
  </script>
</html>
